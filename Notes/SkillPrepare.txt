int nSkillID = iPacket.DecodeInt();
                int nSLV = iPacket.DecodeInt();

                ProcessType pProcessType = new ProcessType();
                pProcessType.Decode(iPacket);

                int nAction = iPacket.DecodeShort();
                int nPrepareSkillActionSpeed = iPacket.DecodeShort(); // This is actually 2 bytes not a short
                int tRequestTime = iPacket.DecodeInt();


public static OutPacket OnSkillPrepare(int dwCharacterID, int nSkillID, int nSLV, int nAction, int nPrepareSkillActionSpeed, Point ptPos) {
        OutPacket oPacket = new OutPacket(LoopbackPacket.UserSkillPrepare, false);
        oPacket.EncodeInt(dwCharacterID);
        oPacket.EncodeInt(nSkillID);
        oPacket.EncodeByte(nSLV);
        oPacket.EncodeShort(nAction);
        if ((nAction & 0x7FFF) < 1898) {
            oPacket.EncodeByte(nPrepareSkillActionSpeed);
            if (nSkillID == 13111020 || nSkillID == 112111016) {
                oPacket.EncodeShort(ptPos.x);
                oPacket.EncodeShort(ptPos.y);
            }
        }
        return oPacket;
    }